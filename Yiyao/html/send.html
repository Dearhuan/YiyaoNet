<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
</head>

<body>
  手机号码：<input id="phone" type="text">
  <button>获取短信验证码</button>
  <script>
    function getRandom(min, max) {
      return parseInt(Math.random() * (max - min + 1)) + min
    }

    function formatterDateTime() {
      var date = new Date()
      var month = date.getMonth() + 1
      var datetime = date.getFullYear() +
        "" // "年"
        +
        (month >= 10 ? month : "0" + month) +
        "" // "月"
        +
        (date.getDate() < 10 ? "0" + date.getDate() : date
          .getDate()) +
        "" +
        (date.getHours() < 10 ? "0" + date.getHours() : date
          .getHours()) +
        "" +
        (date.getMinutes() < 10 ? "0" + date.getMinutes() : date
          .getMinutes()) +
        "" +
        (date.getSeconds() < 10 ? "0" + date.getSeconds() : date
          .getSeconds());
      return datetime;
    }

    let num = getRandom(1000, 9999);
    console.log(num);
    let phoneInput = $('#phone');
    $('button').click(() => {

      let phone = phoneInput.val().trim();
      $.ajax({
        type: "post",
        url: "http://route.showapi.com/28-1",
        data: {
          "showapi_timestamp": formatterDateTime(),
          "showapi_appid": '105009', //这里需要改成自己的appid
          "showapi_sign": '51084e3ee1f34d5c86af6e0e3506a8fa', //这里需要改成自己的应用的密钥secret
          "mobile": phone,
          "content": `{\"name\":\"牛二\",\"code\":\"${num}\",\"minute\":\"3\",\"comName\":\"千峰教育\"}`,
          "title":"千峰教育",
          "tNum": "T150606060601",
          "big_msg": ""
        },
        dataType: "json",
        success: function (res) {
          console.log(res);
        },
        error: function (XmlHttpRequest, textStatus, errorThrown) {
          alert("操作失败!");
        },
      });

      /* $.ajax({
        type: "get",
        url: "https://open.ucpaas.com/ol/sms/sendsms",
        data: {
          "sid": "df814ad07ff019c875627c49607c7377",
          "token": "cb1dc5c655418595f9bc55445a184bee",
          "appid": "75a154cffa7a400aad5dbddb3da2b289",
          "templateid": "452930",
          // "param": "87828,3",
          "mobile": "15243906482",
          // "uid": "2d92c6132139467b989d087c84a365d8"
        },
        headers:{
          "Content-Type": "application/json;charset=utf-8",
            "Accept": "application/json"
        },
        dataType: "jsonp",
        success: function (res) {
          console.log(res);
        },
        error: function (XmlHttpRequest, textStatus, errorThrown) {
          alert("操作失败!");
        },
      }); */

    })
  </script>
</body>

</html>